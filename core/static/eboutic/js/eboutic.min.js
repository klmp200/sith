function getCookie(t){let e=null;if(document.cookie&&""!==document.cookie){let i=document.cookie.split(";");for(let s=0;s<i.length;s++){let n=i[s].trim();if(n.substring(0,t.length+1)===t+"="){e=decodeURIComponent(n.substring(t.length+1));break}}}return e}function get_starting_items(){if(console.log(starting_items),null!=starting_items&&starting_items.length>0)return starting_items;let t=getCookie("basket_items");if(null==t)return[];let e=JSON.parse(t);return e.length>0?e:[]}document.addEventListener("alpine:init",()=>{Alpine.data("basket",()=>({items:get_starting_items(),get_total(){let t=0;for(let e of this.items)t+=e.quantity*e.unit_price;return t},add(t){t.quantity++,this.edit_cookies()},remove(t){t.quantity--,this.edit_cookies()},clear_basket(){this.items=[],this.edit_cookies()},edit_cookies(){document.cookie="basket_items="+JSON.stringify(this.items)+";Max-Age=3600",document.cookie="basket_total="+JSON.stringify(this.total)+";Max-Age=3600"},create_item(t,e,i){let s={id:t,name:e,quantity:0,unit_price:i};this.items.push(s),this.add(s)},add_from_catalog(t,e,i){let s=this.items.find(e=>e.id===t);void 0===s?this.create_item(t,e,i):this.add(s)}}))});