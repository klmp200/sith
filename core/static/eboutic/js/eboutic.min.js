function getCookie(t){let i=null;if(document.cookie&&""!==document.cookie){let e=document.cookie.split(";");for(let s=0;s<e.length;s++){let n=e[s].trim();if(n.substring(0,t.length+1)===t+"="){i=decodeURIComponent(n.substring(t.length+1));break}}}return i}function get_starting_items(){let t=getCookie("basket_items");if(!t)return[];let i=JSON.parse(t);return i.length>0?i:[]}document.addEventListener("alpine:init",()=>{Alpine.data("basket",()=>({items:get_starting_items(),get_total(){let t=0;for(let i of this.items)t+=i.quantity*i.unit_price;return t},add(t){t.quantity++,this.edit_cookies()},remove(t){let i=this.items.findIndex(i=>i.id===t);i<0||(this.items[i].quantity-=1,0===this.items[i].quantity&&(this.items=this.items.filter(t=>t.id!==this.items[i].id)),this.edit_cookies())},clear_basket(){this.items=[],this.edit_cookies()},edit_cookies(){document.cookie="basket_items="+JSON.stringify(this.items)+";Max-Age=3600"},create_item(t,i,e){let s={id:t,name:i,quantity:0,unit_price:e};this.items.push(s),this.add(s)},add_from_catalog(t,i,e){let s=this.items.find(i=>i.id===t);void 0===s?this.create_item(t,i,e):this.add(s)}}))});